(this["webpackJsonpplant-finder"]=this["webpackJsonpplant-finder"]||[]).push([[0],{167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),i=n(23),a=n.n(i),o=(n(167),n(11)),r=(n(168),n(35)),l=(n(169),n(143)),j=n.n(l),u=n(144),d=n.n(u),h=n(2);function b(){return Object(h.jsxs)("nav",{className:"nav",children:[Object(h.jsx)(r.b,{to:"/image-search",children:Object(h.jsx)(j.a,{})}),Object(h.jsx)("h1",{children:Object(h.jsx)(r.b,{to:"/",children:"GenusGenius"})}),Object(h.jsx)(r.b,{to:"/plant-search",children:Object(h.jsx)(d.a,{})})]})}var p=n(151),m=n(21),O=(n(176),n(177),n(308)),g=n(307),x=n(100);function f(e){var t=Object(c.useState)({open:!1}),n=Object(m.a)(t,2),s=n[0],i=n[1],a=Object(c.useState)(),o=Object(m.a)(a,2),r=o[0],l=o[1];console.log(r);return Object(h.jsxs)("section",{className:"image-card",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:e.result.plant_name}),Object(h.jsx)("h5",{children:"Common Names:"}),Object(h.jsxs)("p",{children:[null===e.result.plant_details.common_names?"No common names found":e.result.plant_details.common_names.join(", ")," "]})]}),Object(h.jsx)("h5",{children:"Description:"}),Object(h.jsxs)("p",{children:[" ",null===e.result.plant_details.wiki_description?"This plant has no info":e.result.plant_details.wiki_description.value]}),Object(h.jsx)("h5",{children:"Taxonomy"}),Object(h.jsxs)("p",{children:["Class: ",e.result.plant_details.taxonomy.class," "]}),Object(h.jsxs)("p",{children:["Genus: ",e.result.plant_details.structured_name.genus]}),Object(h.jsxs)("p",{children:["Species: ",e.result.plant_details.structured_name.species]}),Object(h.jsx)("h5",{children:"Match:"}),Object(h.jsxs)("p",{children:[(100*e.result.probability).toFixed(2),"% "]}),Object(h.jsx)("h5",{children:"More images: "}),Object(h.jsxs)("section",{className:"image-wrapper",children:[Object(h.jsx)("img",{src:e.result.similar_images[0].url,alt:""}),Object(h.jsx)("img",{src:e.result.similar_images[1].url,alt:""})]}),Object(h.jsxs)("footer",{children:[Object(h.jsx)(O.a,{onClick:function(){return i({open:!0})},children:"Mark sighting"}),Object(h.jsx)(g.a,{className:"confirm-dialog",open:s.open,cancelButton:"no",confirmButton:"yes",onCancel:function(){return i({open:!1})},onConfirm:function(){i({open:!1}),console.log("button clicked"),console.log(e.id),navigator.geolocation.getCurrentPosition((function(t){console.log(t.coords);var n={lat:t.coords.latitude,lng:t.coords.longitude};x.post("/api/plants",{props:e,location:n}),l({lat:t.coords.latitude,lng:t.coords.longitude})}))}})]})]})}function v(){var e=Object(c.useState)(),t=Object(m.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)("Hi there!"),a=Object(m.a)(i,2),o=a[0],r=a[1];Object(c.useEffect)((function(){console.log("trigger use effect hook"),setTimeout((function(){r("Upload an image and I'll try ID it")}),2e3)}));return Object(h.jsxs)("section",{className:"image-search",children:[o,Object(h.jsx)("form",{className:"image-search-form",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file"}),Object(h.jsx)("button",{className:"search-btn",type:"button",onClick:function(){console.log("click works!");var e=Object(p.a)(document.querySelector("input[type=file]").files).map((function(e){return new Promise((function(t,n){var c=new FileReader;c.onload=function(e){var n=e.target.result;t(n)},c.readAsDataURL(e)}))}));console.log("promises made..."),Promise.all(e).then((function(e){var t={images:e};fetch("/api/image-search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){var t=e.suggestions;s(t)})).catch((function(e){console.error("Error:",e)}))}))},children:"search"})]})}),Object(h.jsxs)("h5",{children:[" ",void 0===n?"":"Showing ".concat(n.length," matches"),"  "]}),void 0===n?"":n.map((function(e,t){return Object(h.jsx)(f,{className:"card",result:e,id:t},t)}))]})}var k=n(147),w=n(148),y=n(152),N=n(150),_=n(61),C=n(100),S=function(e){Object(y.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(k.a)(this,n);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={markers:[],showingInfoWindow:!1,activeMarker:{},selectedName:"",selectedImg:"",selectedDescription:""},e.componentDidMount=function(){C.get("/plants",{}).then((function(t){var n=t.data;e.setState({markers:n}),console.log(e.state.markers)})).catch((function(e){console.error("Error:",e)}))},e.displayMarkers=function(){return e.state.markers.map((function(t){return Object(h.jsx)(_.Marker,{onClick:e.onMarkerClick,plant:t.plant_name,description:t.description,url:t.image_url,id:t.id,position:{lat:t.lat,lng:t.lng}},t.id)}))},e.onMarkerClick=function(t,n,c){console.log(c),e.setState({selectedName:t.plant,selectedImg:t.url,selectedDescription:t.description,activeMarker:n,showingInfoWindow:!0}),console.log(e.state)},e}return Object(w.a)(n,[{key:"render",value:function(){var e=this.state,t=e.selectedName,n=e.selectedImg,c=e.selectedDescription;return console.log(t),Object(h.jsxs)(_.Map,{google:this.props.google,zoom:6,style:{width:"80%",height:"75%",margin:"5% 10%"},initialCenter:{lat:-33.949501,lng:151.243698},children:[this.displayMarkers(),Object(h.jsx)(_.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:t}),Object(h.jsx)("p",{children:c}),Object(h.jsx)("img",{src:n,style:{width:"35%"},alt:t})]})})]})}}]),n}(c.Component),M=Object(_.GoogleApiWrapper)({apiKey:"AIzaSyCGvzXToYz5QgOpeaTb2RU3DLsdY5ATAGE"})(S),I=(n(213),n(149)),T=n.n(I);function D(){var e=Object(c.useState)(!1),t=Object(m.a)(e,2),n=t[0],s=t[1];return Object(h.jsxs)("div",{className:"slideUpPanel",children:[Object(h.jsxs)("div",{className:"modal ".concat(n?"show":""),onClick:function(){return s(!n)},children:[Object(h.jsx)("div",{children:Object(h.jsx)(T.a,{})}),Object(h.jsx)("div",{className:"text",children:Object(h.jsx)("p",{children:"Some dummy text about the about and the search and something else"})})]}),Object(h.jsx)("div",{className:"overlay ".concat(n?"show":""),onClick:function(){return s(!n)}})]})}n(214),n(215);function E(e){return console.log(e),Object(h.jsxs)("section",{className:"plant-card",children:[Object(h.jsx)("h2",{children:e.results.plant_name}),Object(h.jsx)("h5",{children:"Common Names:"}),Object(h.jsx)("p",{children:e.results.common_name.join(", ")}),Object(h.jsx)("h5",{children:"Description:"}),Object(h.jsxs)("p",{children:[" ",null===e.results.description?"This plant has no info":e.results.description]}),Object(h.jsx)("h5",{children:"Taxonomy"}),Object(h.jsxs)("p",{children:["Class: ",e.results.class," "]}),Object(h.jsxs)("p",{children:["Genus: ",e.results.genus]}),Object(h.jsxs)("p",{children:["Species: ",e.results.species]}),Object(h.jsx)("h5",{children:"More images: "}),Object(h.jsx)("section",{className:"image-wrapper",children:Object(h.jsx)("img",{src:e.results.image_url,alt:""})})]})}var A=n(100),G=n(216);function P(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)([]),a=Object(m.a)(i,2),o=a[0],r=a[1],l=Object(c.useState)(""),j=Object(m.a)(l,2),u=j[0],d=j[1],b=Object(c.useState)("Hi there!"),p=Object(m.a)(b,2),O=p[0],g=p[1],x=[];Object(c.useEffect)((function(){console.log("trigger use effect hook"),setTimeout((function(){g("Search for a plant and I'll see if we have it")}),2e3),A.get("/api/plants",{}).then((function(e){var t=e.data;r(t)})).catch((function(e){console.error("Error:",e)}))}),[]);return console.log(u.length),Object(h.jsxs)("section",{className:"plant-search",children:[O,Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"plant-search-form",children:[Object(h.jsx)("input",{type:"text",onChange:function(e){e.preventDefault(),s({content:e.target.value})},cols:"35",rows:"5"}),Object(h.jsx)("button",{className:"search-btn",type:"button",onClick:function(e){console.log(n);var t=G.extract(n.content,{language:"english",remove_digits:!0,return_changed_case:!0,remove_duplicates:!1});console.log(t),o.forEach((function(e){var n=e.description.toLowerCase();new RegExp(t.join("|")).test(n)&&(console.log(e.id),x.push(e))})),d(x)},children:"search"})]})}),Object(h.jsxs)("section",{children:[Object(h.jsx)("h5",{children:0===u.length?"":"Showing ".concat(u.length," matches")}),0===u.length?"":u.map((function(e,t){return Object(h.jsx)(E,{results:e,id:e.id},t)}))]})]})}var F=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(b,{})," ",Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/image-search",children:Object(h.jsx)(v,{})}),Object(h.jsx)(o.a,{exact:!0,path:"/",children:Object(h.jsx)(M,{})}),Object(h.jsx)(o.a,{exact:!0,path:"/plant-search",children:Object(h.jsx)(P,{})})]}),Object(h.jsx)(D,{})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,311)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),i(e),a(e)}))};a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(r.a,{children:Object(h.jsx)(F,{})})}),document.getElementById("root")),L()}},[[283,1,2]]]);
//# sourceMappingURL=main.ac78dbdf.chunk.js.map